# å…µæ™ºä¸–ç•Œé¡¹ç›® - å‰åç«¯è¿æ¥å®ç°è¯¦è§£

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ï¼Œå‰ç«¯ä½¿ç”¨åŸç”ŸHTML/CSS/JavaScriptï¼Œåç«¯ä½¿ç”¨Node.js + Expressæ¡†æ¶ï¼Œæ•°æ®åº“ä½¿ç”¨SQLiteã€‚å‰åç«¯é€šè¿‡RESTful APIè¿›è¡Œæ•°æ®äº¤äº’ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
å‰ç«¯ (Frontend)                    åç«¯ (Backend)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTML/CSS/JS    â”‚   HTTP/HTTPS   â”‚  Node.js        â”‚
â”‚  â”œâ”€ é¡µé¢å±•ç¤º     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  â”œâ”€ Express     â”‚
â”‚  â”œâ”€ ç”¨æˆ·äº¤äº’     â”‚   RESTful API  â”‚  â”œâ”€ è·¯ç”±å¤„ç†     â”‚
â”‚  â”œâ”€ æ•°æ®è¯·æ±‚     â”‚                â”‚  â”œâ”€ ä¸šåŠ¡é€»è¾‘     â”‚
â”‚  â””â”€ çŠ¶æ€ç®¡ç†     â”‚                â”‚  â””â”€ æ•°æ®åº“æ“ä½œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  SQLite æ•°æ®åº“   â”‚
                                   â”‚  â”œâ”€ æ­¦å™¨æ•°æ®     â”‚
                                   â”‚  â”œâ”€ ç”¨æˆ·æ•°æ®     â”‚
                                   â”‚  â”œâ”€ å›¾ç‰‡/è§†é¢‘    â”‚
                                   â”‚  â””â”€ ç»Ÿè®¡æ•°æ®     â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”— è¿æ¥æ–¹å¼è¯¦è§£

### 1. HTTPè¯·æ±‚æ–¹å¼

#### GET è¯·æ±‚ - æ•°æ®è·å–
```javascript
// å‰ç«¯å‘èµ·è¯·æ±‚
const response = await fetch('http://localhost:3000/api/weapons');
const data = await response.json();

// åç«¯å¤„ç†è¯·æ±‚
router.get('/', async (req, res) => {
    try {
        const weapons = db.prepare('SELECT * FROM weapons').all();
        res.json({ success: true, data: weapons });
    } catch (error) {
        res.status(500).json({ success: false, message: error.message });
    }
});
```

#### POST è¯·æ±‚ - æ•°æ®åˆ›å»º
```javascript
// å‰ç«¯å‘é€æ•°æ®
const response = await fetch('http://localhost:3000/api/weapons', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'x-admin-user': 'true'
    },
    body: JSON.stringify({
        name: 'æ–°æ­¦å™¨',
        type: 'å¦å…‹',
        country: 'ä¸­å›½'
    })
});

// åç«¯æ¥æ”¶å¤„ç†
router.post('/', async (req, res) => {
    try {
        const { name, type, country } = req.body;
        const stmt = db.prepare('INSERT INTO weapons (name, type, country) VALUES (?, ?, ?)');
        const result = stmt.run(name, type, country);
        res.json({ success: true, data: { id: result.lastInsertRowid } });
    } catch (error) {
        res.status(500).json({ success: false, message: error.message });
    }
});
```

#### PUT è¯·æ±‚ - æ•°æ®æ›´æ–°
```javascript
// å‰ç«¯æ›´æ–°æ•°æ®
const response = await fetch(`http://localhost:3000/api/weapons/${weaponId}`, {
    method: 'PUT',
    headers: {
        'Content-Type': 'application/json',
        'x-admin-user': 'true'
    },
    body: JSON.stringify({
        description: 'æ›´æ–°åçš„æè¿°'
    })
});

// åç«¯å¤„ç†æ›´æ–°
router.put('/:id', async (req, res) => {
    try {
        const { id } = req.params;
        const { description } = req.body;
        const stmt = db.prepare('UPDATE weapons SET description = ? WHERE id = ?');
        stmt.run(description, id);
        res.json({ success: true, message: 'æ›´æ–°æˆåŠŸ' });
    } catch (error) {
        res.status(500).json({ success: false, message: error.message });
    }
});
```

#### DELETE è¯·æ±‚ - æ•°æ®åˆ é™¤
```javascript
// å‰ç«¯åˆ é™¤æ•°æ®
const response = await fetch(`http://localhost:3000/api/weapons/${weaponId}`, {
    method: 'DELETE',
    headers: {
        'x-admin-user': 'true'
    }
});

// åç«¯å¤„ç†åˆ é™¤
router.delete('/:id', async (req, res) => {
    try {
        const { id } = req.params;
        const stmt = db.prepare('DELETE FROM weapons WHERE id = ?');
        const result = stmt.run(id);
        if (result.changes > 0) {
            res.json({ success: true, message: 'åˆ é™¤æˆåŠŸ' });
        } else {
            res.status(404).json({ success: false, message: 'æ­¦å™¨ä¸å­˜åœ¨' });
        }
    } catch (error) {
        res.status(500).json({ success: false, message: error.message });
    }
});
```

### 2. æ–‡ä»¶ä¸Šä¼ å¤„ç†

#### å›¾ç‰‡ä¸Šä¼ 
```javascript
// å‰ç«¯æ–‡ä»¶ä¸Šä¼ 
const formData = new FormData();
formData.append('image', fileInput.files[0]);
formData.append('description', 'å›¾ç‰‡æè¿°');

const response = await fetch(`http://localhost:3000/api/weapon-images/weapon/${weaponId}/upload`, {
    method: 'POST',
    body: formData
});

// åç«¯æ–‡ä»¶å¤„ç†
const multer = require('multer');
const storage = multer.diskStorage({
    destination: function (req, file, cb) {
        cb(null, 'backend/uploads/weapons/');
    },
    filename: function (req, file, cb) {
        const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);
        cb(null, 'weapon-' + uniqueSuffix + path.extname(file.originalname));
    }
});

const upload = multer({ storage: storage });

router.post('/weapon/:weaponId/upload', upload.single('image'), (req, res) => {
    // å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶
    const file = req.file;
    // ä¿å­˜æ–‡ä»¶ä¿¡æ¯åˆ°æ•°æ®åº“
    // è¿”å›å“åº”
});
```

#### è§†é¢‘ä¸Šä¼ 
```javascript
// å‰ç«¯è§†é¢‘ä¸Šä¼ 
const formData = new FormData();
formData.append('video', videoInput.files[0]);

const response = await fetch(`http://localhost:3000/api/weapon-videos/weapon/${weaponId}/upload`, {
    method: 'POST',
    body: formData
});

// åç«¯è§†é¢‘å¤„ç†ï¼ˆæ”¯æŒæµå¼ä¼ è¾“ï¼‰
router.get('/file/:filename', (req, res) => {
    const filename = req.params.filename;
    const video = db.prepare('SELECT file_path, mime_type FROM weapon_videos WHERE filename = ?').get(filename);
    
    const stat = fs.statSync(video.file_path);
    const fileSize = stat.size;
    const range = req.headers.range;

    if (range) {
        // æ”¯æŒè§†é¢‘æµæ’­æ”¾
        const parts = range.replace(/bytes=/, "").split("-");
        const start = parseInt(parts[0], 10);
        const end = parts[1] ? parseInt(parts[1], 10) : fileSize - 1;
        const chunksize = (end - start) + 1;
        const file = fs.createReadStream(video.file_path, { start, end });
        const head = {
            'Content-Range': `bytes ${start}-${end}/${fileSize}`,
            'Accept-Ranges': 'bytes',
            'Content-Length': chunksize,
            'Content-Type': video.mime_type,
        };
        res.writeHead(206, head);
        file.pipe(res);
    }
});
```

## ğŸ› ï¸ æ ¸å¿ƒæŠ€æœ¯å®ç°

### 1. è·¨åŸŸå¤„ç† (CORS)
```javascript
// åç«¯CORSé…ç½®
app.use(cors({
    origin: process.env.NODE_ENV === 'production' 
        ? ['http://localhost:3001'] 
        : true,
    credentials: true,
    methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
    allowedHeaders: ['Content-Type', 'Authorization', 'x-user-id', 'x-user-role', 'x-admin-user']
}));
```

### 2. é”™è¯¯å¤„ç†
```javascript
// å‰ç«¯é”™è¯¯å¤„ç†
async function apiRequest(url, options = {}) {
    try {
        const response = await fetch(url, options);
        const data = await response.json();
        
        if (!response.ok) {
            throw new Error(data.message || 'è¯·æ±‚å¤±è´¥');
        }
        
        return data;
    } catch (error) {
        console.error('APIè¯·æ±‚å¤±è´¥:', error);
        throw error;
    }
}

// åç«¯é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((error, req, res, next) => {
    logger.error('å…¨å±€é”™è¯¯å¤„ç†:', {
        error: error.message,
        stack: error.stack,
        url: req.url,
        method: req.method
    });

    res.status(error.status || 500).json({
        success: false,
        message: process.env.NODE_ENV === 'production' 
            ? 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯' 
            : error.message
    });
});
```

### 3. æ•°æ®éªŒè¯
```javascript
// å‰ç«¯æ•°æ®éªŒè¯
function validateWeaponData(data) {
    const errors = [];
    
    if (!data.name || data.name.trim().length === 0) {
        errors.push('æ­¦å™¨åç§°ä¸èƒ½ä¸ºç©º');
    }
    
    if (!data.type || data.type.trim().length === 0) {
        errors.push('æ­¦å™¨ç±»å‹ä¸èƒ½ä¸ºç©º');
    }
    
    if (!data.country || data.country.trim().length === 0) {
        errors.push('ç”Ÿäº§å›½å®¶ä¸èƒ½ä¸ºç©º');
    }
    
    return errors;
}

// åç«¯æ•°æ®éªŒè¯ä¸­é—´ä»¶
const validateWeapon = (req, res, next) => {
    const { name, type, country } = req.body;
    const errors = [];
    
    if (!name || typeof name !== 'string' || name.trim().length === 0) {
        errors.push('æ­¦å™¨åç§°å¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²');
    }
    
    if (!type || typeof type !== 'string' || type.trim().length === 0) {
        errors.push('æ­¦å™¨ç±»å‹å¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²');
    }
    
    if (!country || typeof country !== 'string' || country.trim().length === 0) {
        errors.push('ç”Ÿäº§å›½å®¶å¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²');
    }
    
    if (errors.length > 0) {
        return res.status(400).json({
            success: false,
            message: 'æ•°æ®éªŒè¯å¤±è´¥',
            errors: errors
        });
    }
    
    next();
};
```

### 4. èº«ä»½éªŒè¯
```javascript
// å‰ç«¯èº«ä»½éªŒè¯
function setAuthHeaders(headers = {}) {
    const token = localStorage.getItem('authToken');
    if (token) {
        headers['Authorization'] = `Bearer ${token}`;
    }
    return headers;
}

// åç«¯èº«ä»½éªŒè¯ä¸­é—´ä»¶
const authenticateToken = (req, res, next) => {
    const authHeader = req.headers['authorization'];
    const token = authHeader && authHeader.split(' ')[1];
    
    if (!token) {
        return res.status(401).json({
            success: false,
            message: 'è®¿é—®ä»¤ç‰Œç¼ºå¤±'
        });
    }
    
    jwt.verify(token, process.env.JWT_SECRET, (err, user) => {
        if (err) {
            return res.status(403).json({
                success: false,
                message: 'è®¿é—®ä»¤ç‰Œæ— æ•ˆ'
            });
        }
        req.user = user;
        next();
    });
};
```

## ğŸ“Š APIç«¯ç‚¹æ€»è§ˆ

### æ­¦å™¨ç›¸å…³API
| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ | å‚æ•° |
|------|------|------|------|
| GET | `/api/weapons` | è·å–æ­¦å™¨åˆ—è¡¨ | `limit`, `offset`, `type`, `country` |
| GET | `/api/weapons/:id` | è·å–å•ä¸ªæ­¦å™¨è¯¦æƒ… | `id` |
| GET | `/api/weapons/search` | æœç´¢æ­¦å™¨ | `q`, `limit`, `offset` |
| POST | `/api/weapons` | åˆ›å»ºæ–°æ­¦å™¨ | æ­¦å™¨æ•°æ®å¯¹è±¡ |
| PUT | `/api/weapons/:id` | æ›´æ–°æ­¦å™¨ä¿¡æ¯ | `id`, æ›´æ–°æ•°æ® |
| DELETE | `/api/weapons/:id` | åˆ é™¤æ­¦å™¨ | `id` |

### å›¾ç‰‡ç®¡ç†API
| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ | å‚æ•° |
|------|------|------|------|
| GET | `/api/weapon-images/weapon/:weaponId` | è·å–æ­¦å™¨å›¾ç‰‡åˆ—è¡¨ | `weaponId` |
| POST | `/api/weapon-images/weapon/:weaponId/upload` | ä¸Šä¼ æ­¦å™¨å›¾ç‰‡ | `weaponId`, å›¾ç‰‡æ–‡ä»¶ |
| GET | `/api/weapon-images/file/:filename` | è·å–å›¾ç‰‡æ–‡ä»¶ | `filename` |
| PUT | `/api/weapon-images/:imageId` | æ›´æ–°å›¾ç‰‡ä¿¡æ¯ | `imageId`, æ›´æ–°æ•°æ® |
| DELETE | `/api/weapon-images/:imageId` | åˆ é™¤å›¾ç‰‡ | `imageId` |

### è§†é¢‘ç®¡ç†API
| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ | å‚æ•° |
|------|------|------|------|
| GET | `/api/weapon-videos/weapon/:weaponId` | è·å–æ­¦å™¨è§†é¢‘åˆ—è¡¨ | `weaponId` |
| POST | `/api/weapon-videos/weapon/:weaponId/upload` | ä¸Šä¼ æ­¦å™¨è§†é¢‘ | `weaponId`, è§†é¢‘æ–‡ä»¶ |
| GET | `/api/weapon-videos/file/:filename` | è·å–è§†é¢‘æ–‡ä»¶æµ | `filename` |
| PUT | `/api/weapon-videos/:videoId` | æ›´æ–°è§†é¢‘ä¿¡æ¯ | `videoId`, æ›´æ–°æ•°æ® |
| DELETE | `/api/weapon-videos/:videoId` | åˆ é™¤è§†é¢‘ | `videoId` |

### ç»Ÿè®¡æ•°æ®API
| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ | å‚æ•° |
|------|------|------|------|
| GET | `/api/manufacturer-statistics` | è·å–åˆ¶é€ å•†ç»Ÿè®¡ | æ—  |
| GET | `/api/weapon-types` | è·å–æ­¦å™¨ç±»å‹ç»Ÿè®¡ | æ—  |
| GET | `/api/weapon-countries` | è·å–å›½å®¶ç»Ÿè®¡ | æ—  |
| GET | `/api/manufacturers` | è·å–åˆ¶é€ å•†åˆ—è¡¨ | `limit`, `offset` |

## ğŸ”„ æ•°æ®æµç¨‹å›¾

```
ç”¨æˆ·æ“ä½œ â†’ å‰ç«¯JavaScript â†’ HTTPè¯·æ±‚ â†’ åç«¯è·¯ç”± â†’ ä¸šåŠ¡é€»è¾‘ â†’ æ•°æ®åº“æ“ä½œ â†’ å“åº”æ•°æ® â†’ å‰ç«¯æ›´æ–°ç•Œé¢

å…·ä½“ç¤ºä¾‹ï¼š
1. ç”¨æˆ·ç‚¹å‡»"è·å–æ­¦å™¨åˆ—è¡¨"æŒ‰é’®
2. å‰ç«¯è°ƒç”¨ fetch('/api/weapons')
3. åç«¯æ¥æ”¶è¯·æ±‚ï¼Œè·¯ç”±åˆ° weapons.js
4. æ‰§è¡Œ SQL æŸ¥è¯¢ï¼šSELECT * FROM weapons
5. è¿”å› JSON æ ¼å¼æ•°æ®
6. å‰ç«¯æ¥æ”¶æ•°æ®å¹¶æ¸²æŸ“åˆ°é¡µé¢
```

## ğŸ›¡ï¸ å®‰å…¨æªæ–½

### 1. è¾“å…¥éªŒè¯
- å‰ç«¯ï¼šåŸºæœ¬æ ¼å¼éªŒè¯
- åç«¯ï¼šä¸¥æ ¼çš„æ•°æ®ç±»å‹å’Œæ ¼å¼éªŒè¯
- æ•°æ®åº“ï¼šå‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥

### 2. æ–‡ä»¶ä¸Šä¼ å®‰å…¨
```javascript
// æ–‡ä»¶ç±»å‹éªŒè¯
const fileFilter = (req, file, cb) => {
    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];
    if (allowedTypes.includes(file.mimetype)) {
        cb(null, true);
    } else {
        cb(new Error('ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹'), false);
    }
};

// æ–‡ä»¶å¤§å°é™åˆ¶
const upload = multer({ 
    storage: storage,
    fileFilter: fileFilter,
    limits: {
        fileSize: 5 * 1024 * 1024 // 5MBé™åˆ¶
    }
});
```

### 3. è®¿é—®æ§åˆ¶
```javascript
// ç®¡ç†å‘˜æƒé™æ£€æŸ¥
const requireAdmin = (req, res, next) => {
    const isAdmin = req.headers['x-admin-user'] === 'true';
    if (!isAdmin) {
        return res.status(403).json({
            success: false,
            message: 'éœ€è¦ç®¡ç†å‘˜æƒé™'
        });
    }
    next();
};
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åˆ†é¡µ
```javascript
// å‰ç«¯åˆ†é¡µè¯·æ±‚
const loadWeapons = async (page = 1, limit = 20) => {
    const offset = (page - 1) * limit;
    const response = await fetch(`/api/weapons?limit=${limit}&offset=${offset}`);
    return response.json();
};

// åç«¯åˆ†é¡µå®ç°
router.get('/', (req, res) => {
    const limit = parseInt(req.query.limit) || 20;
    const offset = parseInt(req.query.offset) || 0;
    
    const weapons = db.prepare(`
        SELECT * FROM weapons 
        ORDER BY created_at DESC 
        LIMIT ? OFFSET ?
    `).all(limit, offset);
    
    const total = db.prepare('SELECT COUNT(*) as count FROM weapons').get().count;
    
    res.json({
        success: true,
        data: weapons,
        pagination: {
            total,
            limit,
            offset,
            hasMore: offset + limit < total
        }
    });
});
```

### 2. ç¼“å­˜ç­–ç•¥
```javascript
// å‰ç«¯ç¼“å­˜
const cache = new Map();

const getCachedData = async (key, fetchFunction, ttl = 300000) => {
    const cached = cache.get(key);
    if (cached && Date.now() - cached.timestamp < ttl) {
        return cached.data;
    }
    
    const data = await fetchFunction();
    cache.set(key, {
        data,
        timestamp: Date.now()
    });
    
    return data;
};
```

### 3. å›¾ç‰‡ä¼˜åŒ–
```javascript
// å›¾ç‰‡å‹ç¼©å’Œç¼©ç•¥å›¾ç”Ÿæˆ
const sharp = require('sharp');

const processImage = async (inputPath, outputPath) => {
    await sharp(inputPath)
        .resize(800, 600, { fit: 'inside', withoutEnlargement: true })
        .jpeg({ quality: 85 })
        .toFile(outputPath);
        
    // ç”Ÿæˆç¼©ç•¥å›¾
    await sharp(inputPath)
        .resize(200, 150, { fit: 'cover' })
        .jpeg({ quality: 80 })
        .toFile(outputPath.replace('.jpg', '_thumb.jpg'));
};
```

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### 1. ä½¿ç”¨æµ‹è¯•é¡µé¢
æ‰“å¼€ `test-frontend-backend-connection.html` è¿›è¡Œå…¨é¢çš„è¿æ¥æµ‹è¯•ï¼š
- æœåŠ¡å™¨çŠ¶æ€æ£€æŸ¥
- APIç«¯ç‚¹æµ‹è¯•
- æ•°æ®CRUDæ“ä½œ
- æ–‡ä»¶ä¸Šä¼ æµ‹è¯•
- ç»Ÿè®¡æ•°æ®è·å–

### 2. æ‰‹åŠ¨APIæµ‹è¯•
```bash
# æµ‹è¯•æœåŠ¡å™¨çŠ¶æ€
curl http://localhost:3000/health

# æµ‹è¯•è·å–æ­¦å™¨åˆ—è¡¨
curl http://localhost:3000/api/weapons

# æµ‹è¯•æœç´¢åŠŸèƒ½
curl "http://localhost:3000/api/weapons/search?q=å¦å…‹"

# æµ‹è¯•åˆ›å»ºæ­¦å™¨
curl -X POST http://localhost:3000/api/weapons \
  -H "Content-Type: application/json" \
  -H "x-admin-user: true" \
  -d '{"name":"æµ‹è¯•æ­¦å™¨","type":"å¦å…‹","country":"ä¸­å›½"}'
```

### 3. æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- Networkæ ‡ç­¾ï¼šæŸ¥çœ‹HTTPè¯·æ±‚å’Œå“åº”
- Consoleæ ‡ç­¾ï¼šæŸ¥çœ‹JavaScripté”™è¯¯å’Œæ—¥å¿—
- Applicationæ ‡ç­¾ï¼šæ£€æŸ¥æœ¬åœ°å­˜å‚¨å’Œç¼“å­˜

## ğŸš€ éƒ¨ç½²æ³¨æ„äº‹é¡¹

### 1. ç¯å¢ƒé…ç½®
```javascript
// ç”Ÿäº§ç¯å¢ƒé…ç½®
const config = {
    server: {
        port: process.env.PORT || 3000,
        env: process.env.NODE_ENV || 'development'
    },
    cors: {
        origin: process.env.NODE_ENV === 'production' 
            ? ['https://yourdomain.com'] 
            : true
    },
    database: {
        path: process.env.DB_PATH || './data/military-knowledge.db'
    }
};
```

### 2. é™æ€æ–‡ä»¶æœåŠ¡
```javascript
// ç”Ÿäº§ç¯å¢ƒé™æ€æ–‡ä»¶é…ç½®
if (process.env.NODE_ENV === 'production') {
    app.use(express.static(path.join(__dirname, '../frontend/dist')));
    
    app.get('*', (req, res) => {
        res.sendFile(path.join(__dirname, '../frontend/dist/index.html'));
    });
}
```

## ğŸ“ æ€»ç»“

æœ¬é¡¹ç›®çš„å‰åç«¯è¿æ¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š

1. **RESTful APIè®¾è®¡**ï¼šæ ‡å‡†çš„HTTPæ–¹æ³•å’ŒçŠ¶æ€ç 
2. **JSONæ•°æ®æ ¼å¼**ï¼šç»Ÿä¸€çš„è¯·æ±‚å’Œå“åº”æ ¼å¼
3. **æ–‡ä»¶ä¸Šä¼ å¤„ç†**ï¼šæ”¯æŒå›¾ç‰‡å’Œè§†é¢‘çš„ä¸Šä¼ ä¸æµå¼ä¼ è¾“
4. **é”™è¯¯å¤„ç†æœºåˆ¶**ï¼šå®Œå–„çš„é”™è¯¯æ•è·å’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
5. **å®‰å…¨æªæ–½**ï¼šè¾“å…¥éªŒè¯ã€æ–‡ä»¶ç±»å‹æ£€æŸ¥ã€è®¿é—®æ§åˆ¶
6. **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆ†é¡µã€ç¼“å­˜ã€å›¾ç‰‡å‹ç¼©ç­‰
7. **æµ‹è¯•å·¥å…·**ï¼šæä¾›å®Œæ•´çš„æµ‹è¯•é¡µé¢å’ŒAPIæµ‹è¯•æ–¹æ³•

é€šè¿‡è¿™ç§æ¶æ„ï¼Œå‰ç«¯å¯ä»¥çµæ´»åœ°ä¸åç«¯è¿›è¡Œæ•°æ®äº¤äº’ï¼Œå®ç°äº†æ­¦å™¨æ•°æ®çš„å®Œæ•´ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬åŸºæœ¬çš„CRUDæ“ä½œã€æ–‡ä»¶ä¸Šä¼ ã€æœç´¢ã€ç»Ÿè®¡ç­‰åŠŸèƒ½ã€‚
